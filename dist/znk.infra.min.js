!function(a){"use strict";a.module("znk.infra",["znk.infra.pngSequence","znk.infra.enum","znk.infra.svgIcon","znk.infra.general","znk.infra.scroll","znk.infra.content","znk.infra.znkExercise"])}(angular),function(a){"use strict";a.module("znk.infra.content",[])}(angular),function(a){"use strict";a.module("znk.infra.enum",[])}(angular),function(a){"use strict";a.module("znk.infra.general",["znk.infra.enum"])}(angular),function(a){"use strict";a.module("znk.infra.pngSequence",[])}(angular),function(a){"use strict";a.module("znk.infra.popUp",[])}(angular),function(a){"use strict";a.module("znk.infra.scroll",[])}(angular),function(a){"use strict";a.module("znk.infra.svgIcon",[])}(angular),function(a){"use strict";a.module("znk.infra.znkExercise",["znk.infra.enum","znk.infra.svgIcon","znk.infra.scroll"]).config(["SvgIconSrvProvider",function(a){var b={chevron:"components/znkExercise/svg/chevron-icon.svg",correct:"components/znkExercise/svg/correct-icon.svg",wrong:"components/znkExercise/svg/wrong-icon.svg"};a.registerSvgSources(b)}])}(angular),function(a){function b(){var b;this.setContent=function(a){b=a},this.$get=["$q","$injector",function(c,d){function e(){var a;return function(){return{get:function(){return a?c.when(a):f().then(function(b){return a=b,a.updatePublication(function(b){b.key()!==a.key&&(a.latestRevisions=b.val(),a.key=b.key())}),b})},set:function(b,d){return a.revisionManifest[b]=d,c.when({rev:d.rev,status:"update"})}}}}function f(){return g||(g=d.invoke(b)),g}var g,h=e(),i={};return i.getRev=function(b,d){if(!d||!d.revisionManifest||!d.latestRevisions)return c.when({error:"No Data Found! ",data:d});var e,f=d.revisionManifest[b],g=d.latestRevisions[b];return a.isUndefined(g)?c.when({error:"Not Found",data:d}):(e=f?f.rev<g.rev?{rev:f.rev,status:"old"}:f.rev===g.rev?{rev:g.rev,status:"same"}:{error:"failed to get revision!",data:d}:{rev:g.rev,status:"new"},c.when(e))},i.setRev=function(a,b){return h().set(a,{rev:b})},i.getContent=function(a){if(!a||!a.exerciseType)return c.when({error:"Error: getContent require exerciseType!"});var b=a.exerciseId?a.exerciseType+a.exerciseId:a.exerciseType;return h().get().then(function(a){return i.getRev(b,a).then(function(d){if(d.error)return c.when(d);if(!a.contentRoot)return c.when({error:"Error: getContent require contentRoot to be defined in config phase!"});if(!a.userRoot)return c.when({error:"Error: getContent require userRoot to be defined in config phase!"});var e=a.contentRoot+b+"-rev-"+d.rev,f=a.create(e);return"new"===d.status&&i.setRev(b,d.rev).then(function(){var c=a.userRoot+"/revisionManifest/"+b,e=a.create(c);e.set({rev:d.rev})}),f.get()})})},i}]}a.module("znk.infra.content").provider("ContentSrv",b)}(angular),function(a){"use strict";a.module("znk.infra.enum").factory("AnswerTypeEnum",["EnumSrv",function(a){return new a.BaseEnum([["SELECT_ANSWER",0,"select answer"],["FREE_TEXT_ANSWER",1,"free text answer"],["RATE_ANSWER",3,"rate answer"]])}])}(angular),function(a){"use strict";var b={NEW:0,ACTIVE:1,COMPLETED:2,COMING_SOON:3};a.module("znk.infra.enum").constant("exerciseStatusConst",b),a.module("znk.infra.enum").factory("ExerciseStatusEnum",["EnumSrv",function(a){return new a.BaseEnum([["NEW",b.NEW,"new"],["ACTIVE",b.ACTIVE,"active"],["COMPLETED",b.COMPLETED,"completed"],["COMING_SOON",b.COMING_SOON,"coming soon"]])}])}(angular),function(a){"use strict";a.module("znk.infra.enum").factory("ExerciseTimeEnum",["EnumSrv",function(a){return new a.BaseEnum([["5_MIN",5,"5 min"],["10_MIN",10,"10 min"],["15_MIN",15,"15 min"]])}])}(angular),function(a){"use strict";a.module("znk.infra.enum").factory("ExerciseTypeEnum",["EnumSrv",function(a){return new a.BaseEnum([["TUTORIAL",1,"Tutorial"],["PRACTICE",2,"Practice"],["GAME",3,"Game"],["SECTION",4,"Section"],["DRILL",5,"Drill"]])}])}(angular),function(a){"use strict";var b={MATH:0,READING:1,WRITING:2,LISTENING:3,SPEAKING:4,ENGLISH:5,SCIENCE:6};a.module("znk.infra.enum").constant("SubjectEnumConst",b),a.module("znk.infra.enum").factory("SubjectEnum",["EnumSrv",function(a){var c=new a.BaseEnum([["MATH",b.MATH,"math"],["READING",b.READING,"reading"],["WRITING",b.WRITING,"writing"],["LISTENING",b.LISTENING,"listening"],["SPEAKING",b.SPEAKING,"speaking"],["ENGLISH",b.ENGLISH,"english"],["SCIENCE",b.SCIENCE,"science"]]);return c}])}(angular),function(a){a.module("znk.infra.enum").factory("EnumSrv",[function(){function b(a){var b=0,c=1,d=2,e=this;a.forEach(function(a){e[a[b]]={"enum":a[c],val:a[d]}})}var c={};return c.BaseEnum=b,b.prototype.getEnumMap=function(){var a=this,b={},c=Object.keys(a);for(var d in c){var e=c[d],f=a[e];b[f["enum"]]=f.val}return b},b.prototype.getEnumArr=function(){var b=this,c=[];for(var d in b){var e=b[d];a.isObject(e)&&c.push(e)}return c},c.flashcardStatus=new b([["keep",0,"Keep"],["remove",1,"Remove"]]),c}])}(angular),function(a){"use strict";a.module("znk.infra.general").directive("subjectIdToClassDrv",["SubjectEnum",function(b){return{priority:1e3,link:{pre:function(c,d,e){var f=c.$watch(e.subjectIdToClassDrv,function(c){if(!a.isUndefined(c)){f();var g;for(var h in b)if(b[h]["enum"]===c){g=b[h].val,e.classSuffix&&(g+=e.classSuffix);break}d.addClass(g)}})}}}}])}(angular),function(a){"use strict";a.module("znk.infra.pngSequence").directive("pngSequence",["$timeout","ExpansionSrcSrv","$window",function(b,c,d){return{restrict:"E",scope:{onEnded:"&",loop:"&",speed:"&",autoPlay:"&",actions:"="},link:function(e,f,g){function h(){var a,b=+g.startIndex,d=+g.endIndex;n=d-b;for(var e=b;d>e;e++){a=100>e||10>e?10>e?"00"+e:"0"+e:e;var h="<div  style=\"background-image: url('"+c.getExpansionSrc(g.imgData+a+".png")+"'); background-size: cover; will-change: opacity; opacity:0; position: absolute; top:0; left:0;\"></div>";f.append(h)}}function i(){f.empty()}function j(){this.index=0,this.imagesDomElem=f[0].children,this.lastTimestamp=!1}function k(c){this.index!==n-1||e.loop()?this.lastTimestamp&&c-this.lastTimestamp<40?o=d.requestAnimationFrame(k.bind(this)):(this.imagesDomElem[this.index].style.opacity=0,this.index=(this.index+1)%n,this.imagesDomElem[this.index].style.opacity=1,this.lastTimestamp=c,o=d.requestAnimationFrame(k.bind(this))):b(function(){var b=f.children();a.element(b[b.length-1]).css("display","none"),e.onEnded()})}function l(){if(i(),g.imgData&&a.isDefined(g.startIndex)&&g.endIndex&&(h(),e.autoPlay())){var b=new j;o=d.requestAnimationFrame(k.bind(b))}}function m(){return g.imgData+"_"+g.startIndex+"_"+g.endIndex+"_"+g.rotate}var n,o;e.$watch(m,l),e.actions=e.actions||{},e.actions.play=function(){b(function(){var a=new j;o=d.requestAnimationFrame(k.bind(a))},0,!1)},e.actions.reset=i,e.$on("$destroy",function(){d.cancelAnimationFrame(o)})}}}])}(angular),function(){angular.module("znk.infra.popUp").factory("PopUpSrv",["$injector","$q","$rootScope","$animate","$document",function(a,b,c,d,e){function f(a,b,c,d,e){a=a?a+" base-popup show-hide-animation":"base-popup show-hide-animation",b=b||"";var f='<div class="icon-wrapper"><i class="%headerIcon%"></i></div>';f=f.replace("%headerIcon%",b);var g='<div class="title responsive-title">%title%</div><div class="content">%content%</div>';return c=c||"",g=g.replace("%title%",c),d=d||"",g=g.replace("%content%",d),h.popup(a,f,g,e)}function g(a,b,c,d){var e={text:a||"",type:b||""};return d?e.rejectVal=d:e.resolveVal=c,e}var h={},i=angular.element(e[0].body),j=angular.element('<div class="znk-popup"></div>');i.append(j);var k,l;return h.closePopup=function(a,b){b||(b="closed"),j.empty(),k.scope&&k.scope.$destroy(),l[a?"reject":"resolve"](b)},h.popup=function(e,f,g,i){k&&h.closePopup();var m=c.$new(!0);m.d={},l=b.defer(),k={},k.promise=l.promise;var n='<div class="%wrapperCls%"><div class="znk-popup-wrapper"><div class="znk-popup-header">%header%</div><div class="znk-popup-body">%body%</div><div class="znk-popup-buttons"><div ng-repeat="button in ::d.buttons" class="button-wrapper"><button class="btn" ng-click="d.btnClick(button)" ng-class="button.type" analytics-on="click" analytics-event="click-popup-{{button.text}}" analytics-category="popup">{{button.text}}</button></div></div></div></div>';e=e?" "+e:"",n=n.replace("%wrapperCls%",e),f=f||"",n=n.replace("%header%",f),g=g||"",n=n.replace("%body%",g),angular.isDefined(i)&&!angular.isArray(i)&&(i=[i]),m.d.buttons=i,m.d.btnClick=function(a){a.hasOwnProperty("rejectVal")?m.d.close(a.rejectVal,!0):m.d.close(a.resolveVal)},m.d.close=function(a,b){var c=d.leave(o);c.then(function(){if(m&&(m.$destroy(),m=null),k=null,angular.isDefined(l)&&null!==l){var c=b?"reject":"resolve";a=a||"close",l[c]&&l[c](a),l=null}})};var o=angular.element(n);d.enter(o,j);var p=a.get("$compile");return p(j.contents())(m),k},h.error=function(a,b){var c=new g("OK",null,"ok");return f("error-popup","ion-close-round",a||"OOOPS...",b,[c])},h.success=function(a,b){var c=new g("OK",null,"ok");return f("success-popup","correct-answer-white",a||"",b,[c])},h.warning=function(a,b,c,d){var e=[new g(c,null,c),new g(d,"btn-outline",void 0,d)];return f("warning-popup","warning-icon",a,b,e)},h.isPopupOpen=function(){return!!k},h}])}(),function(a){"use strict";a.module("znk.infra.scroll").directive("znkScroll",["$log","$window","$timeout","$interpolate",function(b,c,d,e){function f(c,d,e,f,h){var i=a.isArray(c)?c[0]:c,j=d;if(e){var k,l=i.style.transform,m=l.match(/translateX\((.*)px\)/);!a.isArray(m)||m.length<2?(b.debug("failed to math transform value"),k=0):k=+m[1],j+=k}f=a.isUndefined(f)?-(1/0):f,h=a.isUndefined(h)?1/0:h,j=Math.max(j,f),j=Math.min(j,h);var n="translateX("+j+"px)";g(i,"transform",n)}function g(b,c,d){var e=a.isArray(b)?b[0]:b;null===d?e.style[c]="":e.style[c]=d}function h(b){var d=a.isArray(b)?b[0]:b,e=c.getComputedStyle(d),f=+e.marginRight.replace("px",""),g=+e.marginLeft.replace("px","");return d.offsetWidth+f+g}return{restrict:"E",compile:function(c){function i(a){b.debug("mouse move",a.pageX);var c=a.pageX-n.x;n.x=a.pageX,n.y=a.pageY,l(c,o,p)}function j(a){b.debug("mouse up",a.pageX),document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",j),o=null,p=null,n=null}function k(a){b.debug("mouse down",a.pageX);var c=q.children[0];c&&(o=q.offsetWidth,p=h(c),n={x:a.pageX,y:a.pageY},document.addEventListener("mousemove",i),document.addEventListener("mouseup",j))}function l(a,b,c){var d=Math.min(b-c,0),e=0,g=q.children[0];g.style.transform||f(g,0,!1,!1,d,e),f(g,a,!0,d,e)}function m(a){var b=q.offsetWidth,c=q.children[0],d=h(c),e=Math.min(b-d,0),g=0;f(c,a,!1,e,g)}var n,o,p,q=c[0];return q.addEventListener("mousedown",k),{pre:function(c,j,n){function o(a){b.debug("mouse wheel event",a),l(-a.deltaY,t,u)}function p(){b.debug("mouse enter"),t=q.offsetWidth,u=h(q.children[0]),q.addEventListener("mousewheel",o)}function r(){b.debug("mouse leave"),q.removeEventListener("mousewheel",o)}var s=q.children[0];s&&f(s,0);var t,u,v="false"!==e(n.scrollOnMouseWheel||"")(c);if(v&&(q.addEventListener("mouseenter",p),q.addEventListener("mouseleave",r)),n.actions){a.isUndefined(c.$eval(n.actions))&&c.$eval(n.actions+"={}");var w=c.$eval(n.actions);w.animate=function(a,b,c){if(b&&c){var e="transform "+b+"ms "+c;g(s,"transition",e)}m(a),d(function(){g(s,"transition",null)},b,!1)}}c.$on("$destroy",function(){document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",r),q.removeEventListener("mousedown",k),q.removeEventListener("mouseenter",p),q.removeEventListener("mouseleave",r),q.removeEventListener("mousewheel",o)})}}}}}])}(angular),function(a){"use strict";a.module("znk.infra.svgIcon").directive("svgIcon",["$log","SvgIconSrv",function(a,b){return{scope:{name:"@"},link:{pre:function(c,d){var e=c.name;return e?(d.addClass(e),void b.getSvgByName(e).then(function(a){d.append(a)})):void a.error("svgIcon directive: name attribute was not set")}}}}])}(angular),function(a){"use strict";a.module("znk.infra.svgIcon").provider("SvgIconSrv",[function(){var b={};this.setConfig=function(c){a.extend(b,c)};var c={};this.registerSvgSources=function(b){var d=Object.keys(c);return d.forEach(function(a){b[a]&&console.log("SvgIconSrv: svg icon was already defined before ",a)}),a.extend(c,b),!0};var d={};this.$get=["$templateCache","$q","$http",function(a,b,e){var f={};return f.getSvgByName=function(f){var g=c[f];if(d[g])return d[g];var h=a.get(g);if(h)return b.when(h);var i=e.get(g).then(function(b){return a.put(g,b.data),delete d[g],b.data});return d[g]=i,i},f}]}])}(angular),function(a){"use strict";a.module("znk.infra.znkExercise").directive("answerBuilder",["$compile","AnswerTypeEnum","ZnkExerciseUtilitySrv",function(a,b,c){var d={};return d[b.SELECT_ANSWER["enum"]]="<select-answer></select-answer>",d[b.FREE_TEXT_ANSWER["enum"]]="<select-answer></select-answer>",d[b.RATE_ANSWER["enum"]]="<rate-answer></rate-answer>",{require:["answerBuilder","^questionBuilder"],restrict:"E",controller:[function(){}],link:{pre:function(b,e,f,g){var h=g[0],i=g[1],j=["getViewMode"];c.bindFunctions(h,i,j),h.question=i.question;var k=i.question.answerTypeId,l=d[k];e.html(l),a(e.contents())(b)}}}}])}(angular),function(a){"use strict";a.module("znk.infra.znkExercise").directive("rateAnswer",["ZnkExerciseViewModeEnum",function(b){return{templateUrl:"components/znkExercise/answerTypes/templates/rateAnswerDrv.html",require:["^answerBuilder","^ngModel"],scope:{},link:function(c,d,e,f){function g(b){c.d.selectedItem&&c.d.selectedItem.removeClass("selected"),c.d.selectedItem=a.element(n[b]),c.d.selectedItem.addClass("selected"),j.$setViewValue(b),k===l&&(h(c.d.answers),c.clickHandler=a.noop)}function h(b){for(var c=j.$viewValue,d=b.length-1,e=0;d>e;e++)a.element(n[b[e].id]).addClass("correct");a.element(n[b[d].id]).addClass("correct-edge"),a.isNumber(c)&&(c>=b[0].id&&c<=b[d].id?a.element(n[c]).addClass("selected-correct"):a.element(n[c]).addClass("selected-wrong"))}var i=f[0],j=f[1],k=i.getViewMode(),l=b.ANSWER_WITH_RESULT["enum"],m=b.REVIEW["enum"];c.d={},c.d.itemsArray=new Array(11),c.d.answers=i.question.correctAnswerText;var n,o=c.$watch(function(){return d[0].querySelectorAll(".item-repeater")},function(b){b&&(o(),n=b,k===m?(c.clickHandler=a.noop,h(c.d.answers)):c.clickHandler=g)})}}}])}(angular),function(a){"use strict";a.module("znk.infra.znkExercise").directive("selectAnswer",["$timeout","ZnkExerciseViewModeEnum",function(b,c){return{templateUrl:"components/znkExercise/answerTypes/templates/selectAnswerDrv.html",require:["^answerBuilder","^ngModel"],restrict:"E",scope:{},link:function(d,e,f,g){function h(b){for(var c=j.$viewValue,d=i.question.correctAnswerId,f=a.element(e[0].querySelectorAll(".answer")),g=0;g<f.length;g++){var h=a.element(f[g]);if(h&&h.scope&&h.scope()){var k,o,p=h.scope().answer;i.getViewMode()===l||i.getViewMode()===n?(o="answered",k=c===p.id?"answered":"neutral"):a.isUndefined(c)?i.getViewMode()===m&&(k=d===p.id?"answered-incorrect":"neutral"):k=c===p.id?d===p.id?"correct":"wrong":p.id===d?"answered-incorrect":"neutral",h.removeClass(o),h.addClass(k)}}}var i=g[0],j=g[1],k=c.ANSWER_WITH_RESULT["enum"],l=c.ONLY_ANSWER["enum"],m=c.REVIEW["enum"],n=c.MUST_ANSWER["enum"];d.d={},d.d.answers=i.question.answers,d.d.click=function(a){var b=i.getViewMode();!isNaN(parseInt(j.$viewValue))&&b===k||b===m||(j.$setViewValue(a.id),h(b))},d.d.getIndexChar=function(a){var b=65;return String.fromCharCode(b+a)},j.$render=function(){b(function(){h()})},j.$render(),d.$on("exercise:viewModeChanged",function(){j.$render()})}}}])}(angular),function(a){"use strict";a.module("znk.infra.znkExercise").directive("freeTextAnswerGrid",[function(){return{templateUrl:"scripts/exercise/templates/freeTextAnswerGridDrv.html",restrict:"E",require:"ngModel",scope:{cellsNumGetter:"&cellsNum"},link:function(b,c,d,e){function f(){e.$setViewValue(a.copy(b.d.cells))}b.buttonArray=[1,2,3,4,5,6,7,8,9];var g=b.cellsNumGetter()||3;b.d={viewCells:new Array(g)},b.onClickNum=function(a){d.disabled||b.d.cells.length>=g||(b.d.cells.push(a),f())},b.onClickErase=function(){!d.disabled&&b.d.cells.length&&(b.d.cells.pop(),f())},e.$render=function(){b.d.cells=a.isDefined(e.$viewValue)?e.$viewValue:[]}}}}])}(angular),function(a){a.module("znk.infra.znkExercise").directive("markup",["$window",function(b){var c=!1,d=275,e=a.element("<P/>");return{replace:!0,restrict:"E",link:function(f,g,h){var i=function(a){return e.append(a),e.contents()},j=function(a){var b={width:"",height:""};if(a.style.width){var c=a.style.height,e=a.style.width;if(c=c.replace("px",""),e=e.replace("px",""),!isNaN(e)){for(e=parseInt(e);e>d;)e=.9*e,c=.9*c;b.width=e+"px",b.height=c+"px"}}return b},k=function(b){for(var c,d=0;d<b.length;d++)if(b[d].tagName&&"img"===b[d].tagName.toLowerCase())b[d].style.width&&(c=j(b[d]),b[d].style.width=c.width,b[d].style.height=c.height);else{var e=a.element(b[d]).find("img");if(e.length)for(var f=0;f<e.length;f++)e[f].style.width&&(c=j(e[f]),e[f].style.width=c.width,e[f].style.height=c.height)}return b},l=function(a){for(var b=0;b<a.length;b++)if(a[b].tagName&&"p"===a[b].tagName.toLowerCase()){if(!a[b].style)break;var c=a[b].style.marginLeft;c=c?c.replace("px",""):c,c&&!isNaN(c)&&(a[b].style.marginLeft=0)}return a},m=f.$watch(h.content,function(a){if(a){d=c?b.innerWidth/1.05:b.innerWidth/1.25;var e=i(a);if(e){var f=k(e);f=l(f),g.append(f)}m()}})}}}])}(angular),function(a){a.module("znk.infra.znkExercise").directive("arrayToStringFmtr",[function(){return{require:"ngModel",link:function(a,b,c,d){function e(a){return a&&a.length?a.join(""):void 0}function f(a){return a&&a.length?a.match(/.{1}/g):[]}d.$parsers.push(e),d.$formatters.push(f)}}}])}(angular),function(a){"use strict";var b={BOOKMARK:"znk exercise:bookmark",QUESTION_ANSWERED:"znk exercise:question answered",READY:"znk exercise: exercise ready",QUESTION_CHANGED:"znk exercise: question changed",QUESTIONS_NUM_CHANGED:"znk exercise: questions num changed"};a.module("znk.infra.znkExercise").constant("ZnkExerciseEvents",b)}(angular),function(a){"use strict";a.module("znk.infra.znkExercise").directive("questionBuilder",["$compile","QuestionTypesSrv","$timeout","ZnkExerciseUtilitySrv",function(a,b,c,d){return{restrict:"E",require:["questionBuilder","^znkExercise"],scope:{questionGetter:"&question"},controller:["$scope",function(a){var b=this;b.question=a.questionGetter()}],link:{pre:function(a,b,c,e){var f=e[0],g=e[1],h=["getViewMode","addQuestionChangeResolver","removeQuestionChangeResolver"];d.bindFunctions(f,g,h)},post:function(d,e,f,g){var h=g[0],i=g[1],j=b.getQuestionHtmlTemplate(h.question);e.append(j);var k=d.$new(!0);a(e.contents())(k);var l;c(function(){l=c(function(){i.notifyQuestionReady(h.question.__questionStatus.index)})},0,!1),d.$on("$destroy",function(){c.cancel(l)})}}}}])}(angular),function(a){"use strict";a.module("znk.infra.znkExercise").directive("questionsCarousel",["ZnkExerciseSrv","PlatformEnum","$log","ZnkExerciseSlideDirectionEnum",function(b,c,d,e){return{templateUrl:function(){var a="components/znkExercise/core/template/",e=b.getPlatform();switch(e){case c.DESKTOP["enum"]:a+="questionSwiperDesktopTemplate.html";break;case c.MOBILE["enum"]:a+="questionSwiperMobileTemplate.html"}return a||d.error("znkExerciseBtnSectionDrv directive: template was not defined for platform"),a},require:"ngModel",scope:{questionsGetter:"&questions",onQuestionAnswered:"&"},link:function(b,c,d,f){b.vm={},f.$render=function(){b.vm.currSlideIndex=f.$viewValue},b.vm.SlideChanged=function(){f.$setViewValue(b.vm.currSlideIndex)},d.$observe("slideDirection",function(a){var c=+a;if(b.vm.swiperActions&&!isNaN(c))switch(c){case e.NONE["enum"]:b.vm.swiperActions.lockSwipes();break;case e.RIGHT["enum"]:b.vm.swiperActions.unlockSwipeToPrev(),b.vm.swiperActions.lockSwipeToNext();break;case e.LEFT["enum"]:b.vm.swiperActions.lockSwipeToPrev(),b.vm.swiperActions.unlockSwipeToNext();break;default:b.vm.swiperActions.unlockSwipes()}}),b.$watch("questionsGetter().length",function(a){var c=b.questionsGetter();return a&&!b.vm.questions?void(b.vm.questions=c):(b.vm.questions=c,void b.vm.swiperActions.updateFollowingSlideAddition())}),b.$watch("vm.swiperActions",function(b){a.isObject(b)&&b.enableKeyboardControl()})}}}])}(angular),function(a){"use strict";a.module("znk.infra.znkExercise").directive("znkExerciseBtnSection",["ZnkExerciseSrv","PlatformEnum","$log","ZnkExerciseEvents",function(a,b,c,d){return{restrict:"E",scope:{prevQuestion:"&?",nextQuestion:"&?",onDone:"&",questionsGetter:"&questions"},require:"^znkExercise",templateUrl:function(){var d="components/znkExercise/core/template/",e=a.getPlatform();switch(e){case b.DESKTOP["enum"]:d+="btnSectionDesktopTemplate.html";break;case b.MOBILE["enum"]:d+="btnSectionMobileTemplate.html"}return d||c.error("znkExerciseBtnSectionDrv directive: template was not defined for platform"),d},link:{pre:function(a,b,c,e){function f(b){a.vm.currentQuestionIndex=b||0}function g(b){var c=e.getQuestions();c.then(function(c){a.vm.maxQuestionIndex=c.length-1,b&&b===c.length-1||e.isLastUnansweredQuestion()?a.vm.showDoneButton=!0:a.vm.showDoneButton=!1})}function h(){e.getQuestions().then(function(b){a.vm.maxQuestionIndex=b.length-1}),f(e.getCurrentIndex())}a.vm={},h(),a.vm.prevQuestion=function(){a.prevQuestion()},a.vm.nextQuestion=function(){a.nextQuestion()},a.$on(d.QUESTION_CHANGED,function(a,b){f(b),g(b)}),a.$on(d.QUESTION_ANSWERED,function(){e.isLastUnansweredQuestion()&&(a.vm.showDoneButton=!0)}),a.$on(d.QUESTIONS_NUM_CHANGED,function(){var a=e.getCurrentIndex();g(a)})}}}}])}(angular),function(a){"use strict";a.module("znk.infra.znkExercise").directive("znkSwiper",["$timeout","$q",function(b,c){return{templateUrl:"components/znkExercise/core/template/znkSwiperTemplate.html",replace:!0,restrict:"E",require:"ngModel",scope:{},transclude:!0,compile:function(){function d(b,c,d,e){if(d.actions){b.$parent.$eval(d.actions)||b.$parent.$eval(d.actions+"={}");var f=b.$parent.$eval(d.actions),h=["lockSwipes","lockSwipeToPrev","lockSwipeToNext","unlockSwipes","unlockSwipeToPrev","unlockSwipeToNext","disableKeyboardControl","enableKeyboardControl"];h.forEach(function(a){f[a]=function(){var b=arguments;g.then(function(c){c[a].apply(c,b)})}}),f.updateFollowingSlideAddition=function(){return g.then(function(a){a.updateContainerSize(),a.updateSlidesSize()})}}e.$render=function(){var b=e.$viewValue;a.isNumber(b)&&g.then(function(a){a.slideTo(b)})},g.then(function(a){a.on("onSlideChangeEnd",function(a){e.$setViewValue(a.activeIndex)})}),b.$on("$destroy",function(){g.then(function(a){a.destroy()})})}function e(a,c){b(function(){f.resolve(new Swiper(c[0]))},0,!1)}var f=c.defer(),g=f.promise;return{pre:d,post:e}}}}])}(angular),function(a){"use strict";a.module("znk.infra.znkExercise").provider("QuestionTypesSrv",function(){var b={};this.setQuestionTypesHtmlTemplate=function(a){b=a};var c=a.noop;this.setQuestionTypeGetter=function(a){c=a},this.$get=["$log",function(a){var d={};return d.getQuestionHtmlTemplate=function(d){var e=c(d);return b[e]||a.error("QuestionTypesSrv: Template was not registered for the following question type:",e),b[e]},d}]})}(angular),function(a){"use strict";a.module("znk.infra.znkExercise").factory("ZnkExerciseSrv",["EnumSrv","$window","PlatformEnum",function(a,b,c){var d={},e=b.ionic?c.MOBILE["enum"]:c.DESKTOP["enum"];return d.getPlatform=function(){return e},d.openExerciseToolBoxModal=function(){},d.toolBoxTools={BLACKBOARD:"blackboard",MARKER:"mar",CALCULATOR:"cal",BOOKMARK:"bookmark",SHOW_PAGER:"show pager"},d}])}(angular),function(a){"use strict";a.module("znk.infra.znkExercise").directive("znkExercise",["ZnkExerciseSrv","$location","$window","$q","ZnkExerciseEvents","PlatformEnum","$log","ZnkExerciseViewModeEnum","ZnkExerciseSlideDirectionEnum","$timeout",function(b,c,d,e,f,g,h,i,j,k){return{templateUrl:"components/znkExercise/core/template/znkExerciseDrv.html",restrict:"E",transclude:!0,controllerAs:"vm",require:["znkExercise","ngModel"],scope:{questionsGetter:"&questions",settings:"=?",actions:"=?"},controller:"ZnkExerciseDrvCtrl",compile:function(c){var l=b.getPlatform();l||h.$error("znkExercise directive: undefined platform received.");var m=g.getEnumMap();return c.addClass(m[l]),{pre:function(c,g,h,l){function m(a,b){var d=c.vm.slideDirection;switch(d){case j.NONE["enum"]:return e.reject();case j.RIGHT["enum"]:return b>a?!0:e.reject(!1);case j.LEFT["enum"]:return a>b?!0:e.reject(!1);default:return!0}}function n(a){s=a,c.vm.questionsWithAnswers=s,t.setExerciseAsReady()}function o(){u.$setViewValue(a.copy(c.vm.questionsWithAnswers))}function p(){return s[c.vm.currentSlide]}function q(b){if(b=a.isDefined(b)?b:c.vm.currentSlide,c.settings.viewMode!==i.REVIEW["enum"]){if(!q.lastTimeStamp)return void(q.lastTimeStamp=Date.now());var d=Date.now(),e=d-q.lastTimeStamp;q.lastTimeStamp=d;var f=c.vm.questionsWithAnswers[b];f.__questionStatus.timeSpent=(f.__questionStatus.timeSpent||0)+e,o()}}var r={onDone:a.noop,onQuestionAnswered:a.noop,viewMode:i.ANSWER_WITH_RESULT["enum"],onSlideChange:a.noop,initSlideDirection:j.ALL["enum"],initForceDoneBtnDisplay:null,initPagerDisplay:!0};c.settings=a.extend(r,c.settings);var s,t=l[0],u=l[1],v={},w=d.innerWidth<=567;t.addQuestionChangeResolver(m),c.vm.answeredCount=0,t.setCurrentIndex(c.settings.initSlideIndex||0),c.actions=c.actions||{},c.actions.setSlideIndex=function(a){t.setCurrentIndex(a)},c.actions.getCurrentIndex=function(){return t.getCurrentIndex()},c.actions.finishExercise=function(){q()},c.actions.setSlideDirection=function(b){if(a.isDefined(b)){var d=b===j.RIGHT["enum"],e=b===j.LEFT["enum"],f=b===j.ALL["enum"],h="direction",i=h+"-"+j.RIGHT.val;d||f?g.addClass(i):g.removeClass(i);var k=h+"-"+j.LEFT.val;e||f?g.addClass(k):g.removeClass(k),c.vm.slideDirection=b}},c.actions.forceDoneBtnDisplay=function(a){a===!0?g.addClass("done-btn-show"):g.removeClass("done-btn-show"),a===!1?g.addClass("done-btn-hide"):g.removeClass("done-btn-hide")},c.actions.pagerDisplay=function(a){c.vm.showPager=!!a},u.$render=function(){n(u.$viewValue)};var x={toolsToHide:c.settings.toolsToHide,wrapperCls:c.settings.toolBoxWrapperClass||""};x.events={onToolOpened:function(a){var d=p();switch(a.tool){case b.toolBoxTools.BLACKBOARD:x.actions.setToolValue(b.toolBoxTools.BLACKBOARD,d.__questionStatus.blackboardData||{}),w&&(c.vm.hidePager=!0)}},onToolClosed:function(a){var d=p();switch(a.tool){case b.toolBoxTools.BLACKBOARD:d.__questionStatus.blackboardData=a.value,w&&(c.vm.hidePager=!1)}o()},onToolValueChanged:function(a){switch(a.tool){case b.toolBoxTools.BOOKMARK:c.vm.bookmarkCurrentQuestion()}o()}};var y=b.openExerciseToolBoxModal(x);v.formatter=function(b){b||(b=[]);var d={};b.forEach(function(b){b&&a.isDefined(b.questionId)&&(d[b.questionId]=b)});var e=c.questionsGetter()||[],f=e.map(function(b,c){var e=a.copy(b),f=d[e.id]||{};e.__questionStatus={index:c};for(var g in f)e.__questionStatus[g]=f[g];return e});return f},u.$formatters.push(v.formatter),v.parser=function(b){c.vm.answeredCount=0;var d=u.$modelValue||[];return b.forEach(function(b,e){if(!a.isUndefined(b.__questionStatus)){var f={questionId:b.id},g=["blackboardData","timeSpent","bookmark","userAnswer","isAnsweredCorrectly","audioEnded"];g.forEach(function(c){var d=b.__questionStatus[c];a.isDefined(d)&&(f[c]=d)}),a.isDefined(f.userAnswer)&&c.vm.answeredCount++,d[e]=f}}),d},u.$parsers.push(v.parser),c.vm.questionAnswered=function(){c.settings.viewMode!==i.REVIEW["enum"]&&q(),c.$broadcast(f.QUESTION_ANSWERED,p()),k(function(){c.settings.onQuestionAnswered(c.vm.currentSlide)})},c.vm.bookmarkCurrentQuestion=function(){var a=p();a.__questionStatus.bookmark=!a.__questionStatus.bookmark,c.$broadcast(f.BOOKMARK,a),o()},c.actions.setSlideDirection(c.settings.initSlideDirection),c.actions.forceDoneBtnDisplay(c.settings.initForceDoneBtnDisplay),c.actions.pagerDisplay(c.settings.initPagerDisplay),c.$watch("vm.currentSlide",function(d,e){if(!a.isUndefined(d)){if(q(e),x.actions&&x.actions.setToolValue){var g=p();x.actions.setToolValue(b.toolBoxTools.BOOKMARK,!!g.__questionStatus.bookmark)}k(function(){c.settings.onSlideChange(),c.$broadcast(f.QUESTION_CHANGED,d,e)},0,!1)}}),c.$watch("vm.questionsWithAnswers.length",function(a,b){c.$broadcast(f.QUESTIONS_NUM_CHANGED,a,b)}),c.$on("$destroy",function(){y&&y.close()})}}}}}])}(angular),function(a){"use strict";a.module("znk.infra.znkExercise").controller("ZnkExerciseDrvCtrl",["$scope","$q","ZnkExerciseEvents","$log",function(b,c,d,e){function f(c){var d=b.vm.questionsWithAnswers?b.vm.questionsWithAnswers[c]:{};return d&&d.__questionStatus&&a.isDefined(d.__questionStatus.userAnswer)}function g(b,d){var e=[];return k.forEach(function(f){var g=c.when(a.isFunction(f)?f(b,d):f);e.push(g)}),c.all(e)}var h=this,i=c.defer(),j=!1;h.setExerciseAsReady=function(){j||(j=!0,i.resolve(j))},h.isExerciseReady=function(){return j},h.getViewMode=function(){return b.settings.viewMode},h.getSlideDirection=function(){return b.settings.slideDirection};var k=[];h.addQuestionChangeResolver=function(a){k.push(a)},h.removeQuestionChangeResolver=function(a){var b=[];k.forEach(function(c){c!==a&&b.push(c)}),k=b},h.getCurrentIndex=function(){return b.vm.currentSlide},h.setCurrentIndex=function(d){if(a.isDefined(d)){var f=h.getCurrentIndex();return g(d,f).then(function(){d=Math.max(0,d);var a=b.questionsGetter()||[];return d=Math.min(d,a.length-1),b.vm.currentSlide=d,b.vm.currentSlide})}return e.debug("ZnkExerciseDrv: setCurrentIndex was invoked with undefined newQuestionIndex parameter"),c.when(b.vm.currentSlide)},h.setCurrentIndexByOffset=function(a){var b=this.getCurrentIndex(),c=b+a;return this.setCurrentIndex(c)},h.notifyQuestionReady=function(){h.__exerciseReady||(h.__exerciseReady=!0,b.$broadcast(d.READY),i.resolve(!0),b.settings.onExerciseReady&&b.settings.onExerciseReady())},h.isCurrentQuestionAnswered=function(){return f(b.vm.currentSlide)},h.isLastUnansweredQuestion=function(){for(var a=(b.vm.questionsWithAnswers||[]).length,c=0,d=0;a>d;d++)if(!f(d)&&(c++,2===c))return!1;return 1===c},h.getQuestions=function(){return i.promise.then(function(){return b.vm.questionsWithAnswers})}}])}(angular),function(a){"use strict";a.module("znk.infra.znkExercise").directive("znkExercisePager",["$timeout","ZnkExerciseEvents","ZnkExerciseViewModeEnum",function(b,c,d){return{templateUrl:"components/znkExercise/core/template/znkExercisePagerDrv.html",restrict:"E",require:["ngModel","^znkExercise"],scope:{},link:{pre:function(e,f,g,h){function i(b,c){var d=a.element(o.querySelectorAll(".pager-item")[b]);c?d.addClass("bookmark"):d.removeClass("bookmark")}function j(b,c){var e=a.element(o.querySelectorAll(".pager-item")[b]);return a.isUndefined(c.__questionStatus.userAnswer)?void e.removeClass("neutral correct wrong"):n===d.ONLY_ANSWER["enum"]?void e.addClass("neutral"):void(c.__questionStatus.isAnsweredCorrectly?e.addClass("correct"):e.addClass("wrong"))}function k(){p=!0,b(function(){l.$render=function(){var c=+l.$viewValue;isNaN(c)||b(function(){var b,d=a.element(o.querySelectorAll(".pager-item.current"));for(b in d)d.eq(b).removeClass("current");var f=o.querySelectorAll(".pager-item"),g=a.element(f[c]);g.addClass("current");for(b in e.questions){var h=e.questions[b];i(b,h.__questionStatus.bookmark),j(b,h)}})},l.$render()},!1)}var l=h[0],m=h[1],n=m.getViewMode(),o=f[0];e.d={},e.d.tap=function(a){m.setCurrentIndex(a)},e.$on(c.BOOKMARK,function(a,b){i(b.__questionStatus.index,b.__questionStatus.bookmark)}),e.$on(c.QUESTION_ANSWERED,function(a,b){j(b.__questionStatus.index,b)});var p;e.$parent.$watch(g.questions,function(a){a&&(e.questions=a,p||k())})}}}}])}(angular),function(){angular.module("znk.infra.znkExercise").directive("blackboardDrv",["GoBackHardwareSrv",function(a){return{restric:"EA",scope:{drawingData:"=",actions:"&",close:"&"},replace:!0,templateUrl:"scripts/exercise/templates/blackboardDrv.html",link:function(b,c){function d(){b.close()}function e(){b.d.activeDrawMode=o.pen}function f(){b.d.activeDrawMode=o.eraser}function g(){s.clearRect(0,0,r.width,r.height),b.drawingData.dataUrl=null}function h(a){return a.toDataURL()}function i(a,b){var c=new Image;c.onload=function(){b.width=c.width,b.height=c.height,
b.getContext("2d").drawImage(c,0,0)},c.src=a}function j(a){a.preventDefault(),a.stopPropagation(),p=a.targetTouches[0].pageX,q=a.targetTouches[0].pageY,m(p+1,q+1)}function k(a){a.preventDefault(),a.stopPropagation();var b=a.targetTouches[0].pageX,c=a.targetTouches[0].pageY;m(b,c),p=b,q=c}function l(a){a.preventDefault(),a.stopPropagation(),b.drawingData=b.drawingData||{},b.drawingData.dataUrl=h(r)}function m(a,c){s.beginPath(),b.d.activeDrawMode===o.pen?(s.globalCompositeOperation="source-over",s.strokeStyle="#FFFFFF",s.lineWidth=4,s.moveTo(p,q),s.lineTo(a,c),s.stroke()):b.d.activeDrawMode===o.eraser&&(s.globalCompositeOperation="destination-out",s.arc(p,q,16,0,2*Math.PI,!1),s.fill())}a.registerHandler(d,void 0,!0);var n=b.actions()||{};angular.extend(n,{activatePen:e,activateEraser:f,clear:g});var o={pen:1,eraser:2};b.d={drawModes:o,activeDrawMode:o.pen};var p,q,r=c.find("canvas")[0];r.width=c[0].offsetWidth,r.height=c[0].offsetHeight;var s=r.getContext("2d");b.drawingData.dataUrl&&i(b.drawingData.dataUrl,r),r.addEventListener("touchstart",j),r.addEventListener("touchmove",k),r.addEventListener("touchend",l),b.$on("$destroy",function(){r.removeEventListener("touchstart",j),r.removeEventListener("touchmove",k),r.removeEventListener("touchend",l)})}}}])}(),function(a){a.module("znk.infra.znkExercise").directive("calculator",["GoBackHardwareSrv",function(a){var b=math.cos,c=math.sin,d=math.tan;return{scope:{calcTop:"=",close:"&"},link:function(e){function f(){e.close()}a.registerHandler(f,void 0,!0),math.cos=function(a){return b(math.unit(a,e.trigunits))},math.sin=function(a){return c(math.unit(a,e.trigunits))},math.tan=function(a){return d(math.unit(a,e.trigunits))},e.onClickAns=function(){"ERR"!==e.result&&(e.expression=e.result)},e.onClickNum=function(a){e.expression+=String(a)},e.onClickAdd=function(){e.result&&"ERR"!==e.result&&(e.expression+=e.result),e.expression+=" + "},e.onClickSubtract=function(){e.result&&"ERR"!==e.result&&(e.expression+=e.result),e.expression+=" - "},e.onClickMultiply=function(){e.result&&"ERR"!==e.result&&(e.expression+=e.result),e.expression+=" * "},e.onClickDivide=function(){e.result&&"ERR"!==e.result&&(e.expression+=e.result),e.expression+=" / "},e.onClickClear=function(){e.expression="",e.result=0},e.onClickDot=function(){e.expression+="."},e.onClickPi=function(){e.expression+=" pi "},e.onClickE=function(){e.expression+=" e "},e.onClickRad=function(){e.trigunits="rad"},e.onClickDeg=function(){e.trigunits="deg"},e.onClickSin=function(){e.expression+=" sin(",e.result&&"ERR"!==e.result&&(e.expression+=e.result)},e.onClickCos=function(){e.expression+=" cos(",e.result&&"ERR"!==e.result&&(e.expression+=e.result)},e.onClickTan=function(){e.expression+=" tan(",e.result&&"ERR"!==e.result&&(e.expression+=e.result)},e.onClickSqr=function(){e.result&&"ERR"!==e.result&&(e.expression+=e.result),e.expression+=" ^2 "},e.onClickPowThree=function(){e.result&&"ERR"!==e.result&&(e.expression+=e.result),e.expression+=" ^3 "},e.onClickPow=function(){e.result&&"ERR"!==e.result&&(e.expression+=e.result),e.expression+=" ^ "},e.onClickSqrt=function(){e.expression+=" sqrt(",e.result&&"ERR"!==e.result&&(e.expression+=e.result)},e.onClickInv=function(){e.expression+=" inv(",e.result&&"ERR"!==e.result&&(e.expression+=e.result)},e.onClickAbs=function(){e.expression+=" abs(",e.result&&"ERR"!==e.result&&(e.expression+=e.result)},e.onClickFact=function(){e.result&&"ERR"!==e.result&&(e.expression+=e.result),e.expression+="! "},e.onClickLog=function(){e.expression+=" log(",e.result&&"ERR"!==e.result&&(e.expression+=e.result)},e.onClickLn=function(){e.expression+=" ln(",e.result&&"ERR"!==e.result&&(e.expression+=e.result)},e.onClickOpenParen=function(){e.expression+="(",e.result&&"ERR"!==e.result&&(e.expression+=e.result)},e.onClickCloseParen=function(){e.expression+=")"},e.onClickUndo=function(){e.expression=e.expression.trimRight(),e.expression=e.expression.substring(0,e.expression.length-1)},e.onClickEqual=function(){var a=e.expression.replace("log","log10").replace("ln","log");try{e.result=math.round(math.eval(a),5)}catch(b){try{a+=")",e.result=math.round(math.eval(a),5)}catch(b){e.result="ERR"}}e.expression=""},e.onClickMPlus=function(){e.mem+=e.result},e.onClickMc=function(){e.mem=0},e.onClickMR=function(){e.expression+=e.mem},e.hasMemory=function(){return e.mem>0};var g=function(){e.result=0,e.expression="",e.mem=0,e.trigunits="rad"};g()},templateUrl:"scripts/exercise/templates/calculator.html"}}])}(angular),function(a){"use strict";a.module("znk.infra.znkExercise").controller("ZnkExerciseToolBoxModalCtrl",["$scope","ZnkExerciseDrvSrv","Settings",function(b,c,d){function e(a,b){var c={tool:a,value:b};d.events.onToolValueChanged&&d.events.onToolValueChanged(c)}d.actions=d.actions||{},d.events=d.events||{},d.events.onToolOpened=d.events.onToolOpened||a.noop,d.events.onToolOpened=d.events.onToolOpened||a.noop,b.d={blackboardTool:{actions:{},value:{}},bookmarkTool:{},showPagerTool:{},tools:c.toolBoxTools,toolsStatus:{},toolsToHide:d.toolsToHide},d.actions.setToolValue=function(a,c){switch(a){case b.d.tools.BOOKMARK:b.d.bookmarkTool.value=c;break;case b.d.tools.BLACKBOARD:b.d.blackboardTool.value=c}},b.d.openTool=function(a){var c={tool:a};d.events.onToolOpened(c),b.d.toolsStatus[a]=!0},b.d.closeTool=function(a){var c={tool:a};switch(a){case b.d.tools.BLACKBOARD:c.value=b.d.blackboardTool.value;break;case b.d.tools.BOOKMARK:c.value=b.d.bookmarkTool.value}d.events.onToolClosed(c),b.d.toolsStatus[a]=!1},b.d.reverseBookmarkValue=function(){b.d.bookmarkTool.value=!b.d.bookmarkTool.value,e(b.d.tools.BOOKMARK,b.d.bookmarkTool.value)},b.d.activateBlackboardPencil=function(){b.d[b.d.tools.BLACKBOARD]||b.d.openTool(b.d.tools.BLACKBOARD),b.d.blackboardTool.pencilActivated=!0,b.d.blackboardTool.actions.activatePen&&b.d.blackboardTool.actions.activatePen()},b.d.activateBlackboardEraser=function(){b.d.blackboardTool.pencilActivated=!1,b.d.blackboardTool.actions.activateEraser&&b.d.blackboardTool.actions.activateEraser()},b.d.reverseShowPagerValue=function(){b.d.showPagerTool.value=!b.d.showPagerTool.value,e(b.d.tools.SHOW_PAGER,b.d.showPagerTool.value)},b.d.onCalcClick=function(){b.d.toolsStatus.hasOwnProperty(b.d.tools.CALCULATOR)?b.d.closeTool(b.d.tools.CALCULATOR):b.d.openTool(b.d.tools.CALCULATOR)}}])}(angular),function(a){"use strict";a.module("znk.infra.znkExercise").directive("templateByPlatform",["ZnkExerciseSrv","PlatformEnum","$log",function(a,b,c){return{templateUrl:function(d,e){var f,g=e.prefix||"",h=a.getPlatform();switch(h){case b.DESKTOP["enum"]:f=e.desktopTemp;break;case b.MOBILE["enum"]:f=e.mobileTemp}return f||c.error("templateByPlatform directive: template was not defined for platform"),g+"/"+f},restrict:"E"}}])}(angular),function(a){"use strict";a.module("znk.infra.znkExercise").factory("PlatformEnum",["EnumSrv",function(a){return new a.BaseEnum([["MOBILE",1,"mobile"],["DESKTOP",2,"desktop"]])}])}(angular),function(a){"use strict";a.module("znk.infra.znkExercise").factory("ZnkExerciseSlideDirectionEnum",["EnumSrv",function(a){return new a.BaseEnum([["NONE",1,"none"],["ALL",2,"all"],["RIGHT",3,"right"],["LEFT",4,"left"]])}])}(angular),function(a){"use strict";a.module("znk.infra.znkExercise").factory("ZnkExerciseViewModeEnum",["EnumSrv",function(a){return new a.BaseEnum([["ANSWER_WITH_RESULT",1,"answer with result"],["ONLY_ANSWER",2,"answer only"],["REVIEW",3,"review"],["MUST_ANSWER",4,"must answer"]])}])}(angular),function(a){"use strict";a.module("znk.infra.znkExercise").factory("ZnkExerciseUtilitySrv",[function(){var a={};return a.bindFunctions=function(a,b,c){c.forEach(function(c){a[c]=b[c].bind(b)})},a}])}(angular),angular.module("znk.infra").run(["$templateCache",function(a){a.put("components/znkExercise/answerTypes/templates/rateAnswerDrv.html",'<div class="rate-answer-wrapper">\n\n    <div class="checkbox-items-wrapper" >\n\n        <div class="item-repeater" ng-repeat="item in ::d.itemsArray track by $index">\n            <svg-icon class="correct-icon" name="correct"></svg-icon>\n            <svg-icon class="wrong-icon" name="wrong"></svg-icon>\n            <div class="checkbox-item" ng-click="clickHandler($index)">\n                <div class="item-index">{{ ::($index + 2)}}</div>\n            </div>\n            <div class="correct-answer-line"></div>\n        </div>\n\n    </div>\n</div>\n'),a.put("components/znkExercise/answerTypes/templates/selectAnswerDrv.html",'<div ng-repeat="answer in ::d.answers track by answer.id" class="answer" ng-click="d.click(answer)">\n    <div class="content-wrapper">\n        <div class="answer-index-wrapper">\n            <span class="index-char">{{::d.getIndexChar($index)}}</span>\n        </div>\n        <markup content="answer.content" type="md" class="content"></markup>\n    </div>\n</div>\n'),a.put("components/znkExercise/core/template/btnSectionDesktopTemplate.html",'<div class="btn-container left-container ng-hide" ng-show="!!vm.currentQuestionIndex">\n    <button ng-click="vm.prevQuestion()">\n        <svg-icon name="chevron"></svg-icon>\n    </button>\n</div>\n<div class="btn-container right-container ng-hide"\n     ng-show="vm.maxQuestionIndex !== vm.currentQuestionIndex">\n    <button ng-click="vm.nextQuestion()">\n        <svg-icon name="chevron"></svg-icon>\n    </button>\n</div>\n<button class="done-btn ng-hide" ng-show="vm.showDoneButton" ng-click="onDone()">DONE</button>\n'),a.put("components/znkExercise/core/template/btnSectionMobileTemplate.html",'<div ng-class="{ \'next-disabled\' : settings.slideDirection === d.slideDirections.NONE ||  settings.slideDirection === d.slideDirections.RIGHT }">\n    <div class="bookmark-icon-container only-tablet"\n         ng-class="vm.questionsWithAnswers[vm.currentSlide].__questionStatus.bookmark ? \'bookmark-active-icon\' : \'bookmark-icon\'"\n         ng-click="vm.bookmarkCurrentQuestion()"\n         ng-hide="settings.viewMode === d.reviewModeId"\n         analytics-on="click"\n         analytics-event="click-bookmark-question"\n         analytics-category="exercise"></div>\n    <ng-switch\n            on="vm.currentSlide !== vm.questionsWithAnswers.length - 1 && vm.answeredCount !== vm.questionsWithAnswers.length"\n            ng-hide="settings.viewMode === d.reviewModeId"\n            class="ng-hide"\n            ng-click="d.next()">\n        <button ng-switch-when="true"\n                class="btn next">\n            <div class="only-tablet"\n                 analytics-on="click"\n                 analytics-event="click-next"\n                 analytics-category="exercise">\n                <span>NEXT</span>\n                <i class="question-arrow-right-icon"></i>\n            </div>\n        </button>\n        <button ng-switch-when="false"\n                class="btn finish">\n            <div analytics-on="click"\n                 analytics-event="click-finish"\n                 analytics-category="exercise">DONE\n            </div>\n        </button>\n    </ng-switch>\n    <button class="btn sum ng-hide"\n            ng-click="settings.onSummary()"\n            ng-show="settings.viewMode === d.reviewModeId"\n            analytics-on="click"\n            analytics-event="click-summary"\n            analytics-category="exercise">SUMMARY\n    </button>\n</div>\n'),a.put("components/znkExercise/core/template/questionSwiperDesktopTemplate.html",'<znk-swiper class="znk-carousel"\n            ng-model="vm.currSlideIndex"\n            actions="vm.swiperActions"\n            ng-change="vm.SlideChanged()"\n            disable-swipe="{{vm.isLocked}}">\n    <div class="swiper-slide"\n        ng-repeat="question in vm.questions">\n        <question-builder question="question"\n                          ng-model="question.__questionStatus.userAnswer"\n                          ng-change="onQuestionAnswered(question)">\n        </question-builder>\n    </div>\n</znk-swiper>\n'),a.put("components/znkExercise/core/template/questionSwiperMobileTemplate.html",'<ion-slide-box znk-slide="settings.slideDirection" class="znk-carousel"\n               show-pager="false"\n               active-slide="vm.currentSlide">\n    <question-builder slide-repeat-drv="question in vm.questionsWithAnswers"\n                      question="question"\n                      ng-model="question.__questionStatus.userAnswer"\n                      ng-change="vm.questionAnswered(question)">\n    </question-builder>\n</ion-slide-box>\n'),a.put("components/znkExercise/core/template/znkExerciseDrv.html",'<div ng-transclude></div>\n<questions-carousel class="znk-carousel-container"\n                    questions="vm.questionsWithAnswers"\n                    disable-swipe="{{vm.slideDirection !== 2}}"\n                    ng-model="vm.currentSlide"\n                    on-question-answered="vm.questionAnswered()"\n                    slide-direction="{{vm.slideDirection}}">\n</questions-carousel>\n<znk-exercise-btn-section class="btn-section"\n                          prev-question="vm.setCurrentIndexByOffset(-1)"\n                          next-question="vm.setCurrentIndexByOffset(1)"\n                          on-done="settings.onDone()">\n</znk-exercise-btn-section>\n<znk-exercise-pager class="ng-hide"\n                    ng-show="vm.showPager"\n                    questions="vm.questionsWithAnswers"\n                    ng-model="vm.currentSlide">\n</znk-exercise-pager>\n'),a.put("components/znkExercise/core/template/znkExercisePagerDrv.html",'<znk-scroll>\n    <div class="pager-items-wrapper">\n        <div class="pager-item"\n             ng-repeat="question in questions track by question.id"\n             question-status="question.__questionStatus"\n             question="question"\n             ng-click="d.tap($index)">\n            <div class="question-bookmark-icon"></div>\n            <div class="question-status-indicator">\n                <div class="index">{{::$index + 1}}</div>\n            </div>\n        </div>\n    </div>\n</znk-scroll>\n'),a.put("components/znkExercise/core/template/znkSwiperTemplate.html",'<div class="swiper-container">\n    <!-- Additional required wrapper -->\n    <div class="swiper-wrapper" ng-transclude>\n        <!-- Slides -->\n    </div>\n</div>\n'),a.put("components/znkExercise/svg/chevron-icon.svg",'<svg x="0px" y="0px" viewBox="0 0 143.5 65.5">\n    <polyline class="st0" points="6,6 71.7,59.5 137.5,6 "/>\n</svg>\n'),a.put("components/znkExercise/svg/correct-icon.svg",'<?xml version="1.0" encoding="utf-8"?>\n<!-- Generator: Adobe Illustrator 19.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n	 viewBox="0 0 188.5 129" style="enable-background:new 0 0 188.5 129;" xml:space="preserve">\n<style type="text/css">\n	.st0{fill:none;stroke:#231F20;stroke-width:15;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}\n</style>\n<g>\n	<line class="st0" x1="7.5" y1="62" x2="67" y2="121.5"/>\n	<line class="st0" x1="67" y1="121.5" x2="181" y2="7.5"/>\n</g>\n</svg>\n'),a.put("components/znkExercise/svg/wrong-icon.svg",'<?xml version="1.0" encoding="utf-8"?>\n<!-- Generator: Adobe Illustrator 19.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n	 viewBox="0 0 126.5 126.5" style="enable-background:new 0 0 126.5 126.5;" xml:space="preserve">\n<style type="text/css">\n	.st0{fill:none;stroke:#231F20;stroke-width:15;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}\n</style>\n<g>\n	<line class="st0" x1="119" y1="7.5" x2="7.5" y2="119"/>\n	<line class="st0" x1="7.5" y1="7.5" x2="119" y2="119"/>\n</g>\n</svg>\n')}]);